<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>полярные координаты</title>
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<style>* { margin:0px; padding:0px; }
			BODY { overflow:hidden; }
		</style>
		<script>
			var config = new Object;
			
			function initApp(params) {
				createDebugPanel();
				initConfig(params);
			}
			function initConfig(params) {
				config.x0 = params['centerX'];
				config.y0 = params['centerY'];
				config.pointWidth = config.pointHeight = 10;
				
				config.radius = params['radius']
				debug('радиус: '+config.radius+' точек');
				
				config.roundsPerSecond = params['roundsPerSecond']
				debug('оборотов в секунду: '+config.roundsPerSecond);
				
				config.perimeter = Math.round(2*config.radius*Math.PI);
				debug('периметр: '+config.perimeter+' точек');
				
				config.pointsPerCircle = 1000 / params['roundsPerSecond'];
				debug('точек на круг: '+config.pointsPerCircle);
				
				config.pointSize = Math.round(config.perimeter/config.pointsPerCircle);
				debug('размер точки: '+config.pointSize+' точек');
				
				config.pointDelay = params['pointDelay'];
				debug('задержка точки: '+config.pointDelay+' мс');
				
				config.arcLen = Number(params['arcLen'].replace(/%/,''));
				debug('длина дуги: '+config.arcLen+'%');
				
				// процент от периода оборота
				config.pointLifetime = (1000/config.roundsPerSecond) * (config.arcLen/100);
				debug('время жизни точки: '+config.pointLifetime+' мс');
			}
			function debug(data) {
				var p = document.createElement('p')
					p.style.paddingLeft = '3px'
					p.style.fontSize = '11px'
					p.style.fontFamily = 'monospace'
					p.innerHTML = data
				var panel = document.getElementById('debugPanel')
					panel.appendChild(p)
			}
			function createDebugPanel(id='debugPanel') {
				var panel = document.createElement('div')
					panel.style.position = 'absolute'
					panel.style.right = '0.5%'
					panel.style.top = '1%'
					panel.style.width = '48%'
					panel.style.height = '98%'
					panel.style.backgroundColor = 'rgb(231,231,231)'
					panel.style.overflow = 'auto'
					panel.id = id
				document.getElementById('body').appendChild(panel)
				return panel
			}
			function createPoint(x,y){
				var point = document.createElement('div');
					point.width = config.pointWidth;
					point.height = config.pointHeight;
					point.style.width = point.width+'px';
					point.style.height = point.height+'px';
					point.style.position = 'absolute';
					point.style.backgroundColor = 'deepskyblue';
					point.style.borderRadius = point.width+'px';
					point.style.boxShadow = '1px 1px 2px rgba(128,128,128,0.4)';
					point.style.left = config.x0 + x + 'px';
					point.style.top = config.y0 + y + 'px';
				document.body.appendChild(point);
			}
		</script>
	</head>
	<body id='body'>
		<script>
			initApp({
				centerX:200,
				centerY:200,
				radius:100,
				roundsPerSecond:10,
				pointDelay:1,
				arcLen:'50%', //процентов
			});
		</script>
		
		<script>
			//~ for(var fi=0; fi<2*Math.PI; fi+=angle) {
				//~ var x = r * Math.cos(fi);
				//~ var y = r * Math.sin(fi);
				//~ c++;
				//~ createPoint(x,y);
			//~ }
		</script>
	</body>
</html>
