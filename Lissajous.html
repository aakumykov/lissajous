<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<title>Лиссажу2</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<script>
		config = new Object
		function the_curve(x) {
			// a*sin(b*x)
			return config.a*Math.sin(config.b*x)
		}
		
		function initApp(id) {
			initConfig(id)
			movePoint()
		}
		
		function initConfig(id) {
			config.a = 2
			config.b = 3
			
			config.dx = config.dy = 0.1
			config.dtX = config.dtY = 0.1
			
			config.x1 = -Math.PI
			config.x2 = Math.PI
			config.y1 = -Math.PI
			config.y2 = Math.PI
			
			config.tX1 = -Math.PI
			config.tX2 = Math.PI
			config.tY1 = -Math.PI/2
			config.tY2 = Math.PI*3/2
			
			config.x0 = 0
			config.y0 = 0
			
			config.marginW = 20
			config.marginH = 20
			config.areaW = window.innerWidth - config.marginW*2
			config.areaH = window.innerHeight - config.marginH*2
			config.areaX0 = config.areaW/2 + config.marginW
			config.areaY0 = config.areaH/2 + config.marginH
			
			config.kX = config.areaW / (config.x2 - config.x1)
			config.kY = config.areaH / (config.y2 - config.y1)
			
			area = document.getElementById('area')
			area.style.width = config.areaW+'px'
			area.style.height = config.areaH+'px'
			area.style.left = config.marginW+'px'
			area.style.top = config.marginH+'px'
			
			config.point = document.getElementById(id)
			
			config.x = config.x0
			config.y = config.y0
			config.tX = config.tX1
			config.tY = config.tY1
			
			config.point.w = Number( config.point.style.width.trim().replace(/[^\d]+$/,'') )
			config.point.h = Number( config.point.style.height.trim().replace(/[^\d]+$/,'') )
			
			center = document.getElementById('center')
			center.style.left = (config.areaX0-1)+'px'
			center.style.bottom = (config.areaY0-1)+'px'
		}
		
		function nextXY() {
			config.x = the_curve(config.tX)
			config.y = the_curve(config.tY)
			
			config.tX += config.dtX
			config.tY += config.dtY
			
			if (config.tX > config.tX2) config.tX = config.tX1
			if (config.tY > config.tY2) config.tY = config.tY1
		}
		
		function movePoint() {
			realX = config.areaX0 + config.kX * config.x - config.point.w/2
			realY = config.areaY0 + config.kY * config.y - config.point.w/2
			config.point.style.left = realX+'px'
			config.point.style.bottom = realY+'px'
		}
		
		function tick() {
			//alert('tick()')
			nextXY()
			movePoint()
		}
		
		function start() {
			tick()
			config.interval = window.setInterval('tick()',25)
		}
	</script>
</head>

<body onLoad="initApp('point'); start();" style='width:100%; height:100%; background-color:#FFF9C3;'>
	<body>
	<div id='area' style='position:absolute; border:1px dotted coral;'></div>
	<div id='center' style='position:absolute; width:3px; height:3px; background-color:grey;'></div>
	<div 
		id='point' 
		onClick="start()" 
		style='position:absolute; width:30px; height:30px; background:crimson; border-radius:12px 6px 12px 6px; box-shadow:1px 1px 2px rgba(128,128,128,0.4);'
	></div>
	<!--<input id='xArea'><input id='yArea'><br>
	<input id='xAreaR'><input id='yAreaR'><br>-->
</body>

</html>
