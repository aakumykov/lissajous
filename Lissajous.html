<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<title>Лиссажу2</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<script>
		config = new Object
		function initApp(id) {
			//alert('initApp('+id+')')
			initConfig(id)
			movePoint()
			
			//config.interval = window.setInterval('tick',1000)
		}
		function initConfig(id) {
			//alert('initConfig('+id+')')
			config.point = document.getElementById(id)
			pointW = Number( config.point.style.width.trim().replace(/[^\d]+$/,'') )
			pointH = Number( config.point.style.height.trim().replace(/[^\d]+$/,'') )
			
			config.w = 2
			config.h = 2
			config.x0 = 0
			config.y0 = 0
			
			config.areaW = window.innerWidth - pointW
			config.areaH = window.innerHeight - pointH
			config.areaX0 = (config.areaW / config.w) + (pointW/2)
			config.areaY0 = (config.areaH / config.h) + (pointH/2)
			
			config.kX = config.areaW / config.w
			config.kY = config.areaH / config.h
			
			
			config.t = 0
			config.dt = 0.1
			
			config.x = config.y0
			config.y = config.x0
		}
		function movePoint() {
			config.point.style.left = ((config.areaX0 + config.kX * config.x) - (pointW/2)) + 'px'
			config.point.style.bottom = ((config.areaY0 + config.kY * config.y) - (pointH/2)) + 'px'
		}
		function nextXY() {
			config.x = Math.sin(config.t)
			config.t += config.dt
			if (config.t >= 2*Math.PI) {
				config.t = 0
			}
		}
		function tick() {
			//alert('tick()')
			nextXY()
			movePoint()
		}
		function start_stop() {
			tick()
			config.interval = window.setInterval('tick()',5)
		}
	</script>
</head>

<body onLoad="initApp('point')" style='width:100%; height:100%; background-color:#FFF9C3;'>
	<body>
	<div 
		id='point' 
		onClick="start_stop()" 
		style='position:absolute; width:20px; height:20px; background:crimson; border-radius:10px; box-shadow:1px 1px 2px rgba(128,128,128,0.4);'
	></div>
	<!--<input id='xArea'><input id='yArea'><br>
	<input id='xAreaR'><input id='yAreaR'><br>-->
</body>

</html>
